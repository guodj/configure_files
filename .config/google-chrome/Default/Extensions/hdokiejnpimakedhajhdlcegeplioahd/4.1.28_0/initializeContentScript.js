(function(){LPPlatform.requestFramework=new LPBackgroundRequester(LPPlatform.requestFrameworkInitializer);Topics.get(Topics.INITIALIZED).subscribe(function(){LPPlatform.requestFramework.initialize()});window.bg=Interfaces.createInstance(Interfaces.BackgroundInterface,{direct:!1,context:"contentScript",requestFunction:function(a){LPPlatform.requestFramework.sendRequest({backgroundRequest:a})}});if(window===top)window.csTop=Interfaces.createInstance(Interfaces.ContentScriptInterface,{direct:!0,source:window});
else{var b=null;Topics.get(Topics.REQUEST_FRAMEWORK_INITIALIZED).subscribe(function(a){b=parseInt(a.topFrameID)});window.csTop=Interfaces.createInstance(Interfaces.ContentScriptInterface,{direct:!1,context:"contentScript",requestFunction:function(a){null===b?LPPlatform.requestFramework.initialize(function(){LPPlatform.requestFramework.sendRequest({contentScriptRequest:a,frameID:b})}):LPPlatform.requestFramework.sendRequest({contentScriptRequest:a,frameID:b})}})}"complete"===document.readyState?Topics.get(Topics.INITIALIZED).publish():
document.addEventListener("readystatechange",function(){"complete"===document.readyState&&Topics.get(Topics.INITIALIZED).publish()})})();
