LPMessaging=function(m){var n=0,h={},p=0,j=function(c){var b={},a=!1,d;for(d in c)if(c.hasOwnProperty(d)){var e=c[d];switch(typeof e){case "function":a=a||!0;b[d]=!0;break;case "object":b[d]=j(e),a=a||null!==b[d]}}return a?b:null},k=function(c){var b={},a;for(a in c){var d=c[a];switch(typeof d){case "function":b[a]=d;delete c[a];break;case "object":b[a]=k(d)}}return b},q=function(c,b,a){return function(d){var e={requestID:b.requestID,callbackPath:a};if(0<arguments.length&&arguments[0].outerHTML)e.response=
arguments[0].outerHTML;else{for(var f=[],g=0,h=arguments.length;g<h;++g)f.push(arguments[g]);e.args=f}c(e)}},l=function(c,b,a,d,e){e=e||[];for(var f in a){var g=a[f];switch(typeof g){case "object":l(c,b[f],g,d,e.concat(f));break;default:b[f]=q(c,d,e.concat(f))}}};return{handleRequest:function(c,b,a,d){var e=b.args;l(a,e,b.functions,b);LPReflection.callFunction(c,b.cmd,e,d)},makeRequest:function(c,b,a){var d=j(a),e;d&&(e=++p,h[e]=k(a));return c({requestID:e,cmd:b,args:a,functions:d})},handleResponse:function(c){var b=
h[c.requestID];delete h[c.requestID];for(var a=0,d=c.callbackPath.length;a<d;++a)b=b[c.callbackPath[a]];b.apply(m,c.args)},getNewMessageSourceID:function(){return++n}}}(this);
