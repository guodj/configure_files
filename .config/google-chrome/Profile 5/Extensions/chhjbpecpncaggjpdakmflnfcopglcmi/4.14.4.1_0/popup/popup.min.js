/*! 
 * Ebates Button v4.14.4.1 2017-03-15
 * Copyrights 2016 Ebates Inc.
 */
"use strict";function getBackground(){return new Promise(function(a){webext&&webext.runtime.getBackgroundPage?webext.runtime.getBackgroundPage(function(b){window.background=b,a()}):(window.background=framework.extension.getBackgroundPage(),a())})}function waitLoadDOMContent(){return new Promise(function(a){$(window).on("DOMContentLoaded",function(){a()})})}this.Handlebars=this.Handlebars||{},this.Handlebars.templates=this.Handlebars.templates||{},this.Handlebars.templates["daily-deal"]=Handlebars.template({1:function(a,b,c,d,e){var f;return'\t\t<hr>\r\n\t\t<div class="footer">\r\n\t\t\t<span>Promo Code: </span><span class="code-value">'+a.escapeExpression((f=null!=(f=c.code||(null!=b?b.code:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:{},{name:"code",hash:{},data:e}):f))+"</span>\r\n\t\t</div>\r\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g,h=a.escapeExpression,i=null!=b?b:{},j=c.helperMissing;return'<div class="daily-deal-item deal-item">\r\n\t<div class="header">\r\n\t\t<div class="store-logo" style="background-image: url('+h(a.lambda(null!=(f=null!=b?b.images:b)?f.largeLogo:f,b))+')"></div>\r\n\t\t<div class="activate-button">'+h((g=null!=(g=c.cashBackAmount||(null!=b?b.cashBackAmount:b))?g:j,"function"==typeof g?g.call(i,{name:"cashBackAmount",hash:{},data:e}):g))+' Cash Back</div>\r\n\t</div>\r\n\t<div class="deal-text">\r\n\t\t'+h((g=null!=(g=c.description||(null!=b?b.description:b))?g:j,"function"==typeof g?g.call(i,{name:"description",hash:{},data:e}):g))+"\r\n\t</div>\r\n"+(null!=(f=c.if.call(i,null!=b?b.code:b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+"</div>"},useData:!0}),this.Handlebars.templates.header=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:{},h=c.helperMissing,i=a.escapeExpression;return'<div id="header">\r\n\t<div class="logo"></div>\r\n\t<div class="info reward-pending">\r\n\t\t<div class="reward" id="labelRewardPending">'+i((c.format||b&&b.format||h).call(g,null!=(f=null!=b?b.accountSummary:b)?f.pendingAmount:f,{name:"format",hash:{},data:e}))+'</div>\r\n\t\t<div class="label">Cash Back Pending</div>\r\n\t</div>\r\n\t<div class="delimiterContainer">\r\n\t\t<div class="delimiterMarginTop"></div>\r\n\t\t<div class="delimiter"></div>\r\n\t</div>\r\n\t<div class="info reward-total">\r\n\t\t<div class="reward" id="labelRewardTotal">'+i((c.format||b&&b.format||h).call(g,null!=(f=null!=b?b.accountSummary:b)?f.totalAmount:f,{name:"format",hash:{},data:e}))+'</div>\r\n\t\t<div class="label">Total Earned</div>\r\n\t</div>\r\n</div>'},useData:!0}),this.Handlebars.templates["message-bonus"]=Handlebars.template({1:function(a,b,c,d,e){return" faa-ring animated"},3:function(a,b,c,d,e){var f;return'\t\t<div class="message-text">\r\n\t\t\t\t<i>'+a.escapeExpression((f=null!=(f=c.bonusDescription||(null!=b?b.bonusDescription:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:{},{name:"bonusDescription",hash:{},data:e}):f))+'</i> now active!\r\n\t\t</div>\r\n\t\t<h2 class="list-header"></h2>\r\n\t\t<div class="message-box-buttons">\r\n\t\t\t<a class="message-bonus-navigate">Go to Store</a>\r\n\t\t\t<a class="message-close">Dismiss</a>\r\n\t\t</div>\r\n\r\n\t'},5:function(a,b,c,d,e){var f;return null!=(f=c.if.call(null!=b?b:{},null!=b?b.error:b,{name:"if",hash:{},fn:a.program(6,e,0),inverse:a.program(8,e,0),data:e}))?f:""},6:function(a,b,c,d,e){return'\r\n\r\n\t\t<div class="message-text">\r\n\t\t\t\tSorry, we can\'t activate this Bonus right now. See the full list of your available Bonuses on <a class="message-error-link" href="javascript: void(0);">Ebates.com</a>.\r\n\t\t</div>\r\n\t\t<h2 class="list-header"></h2>\r\n\t\t<div class="message-box-buttons">\r\n\t\t\t<a class="message-close">Dismiss</a>\r\n\t\t</div>\r\n\r\n'},8:function(a,b,c,d,e){var f,g,h=null!=b?b:{};return'\r\n\t\t<div class="message-text">\r\n\r\n\t\t\t'+(null!=(g=null!=(g=c.text||(null!=b?b.text:b))?g:c.helperMissing,f="function"==typeof g?g.call(h,{name:"text",hash:{},data:e}):g)?f:"")+"\r\n\t\t\t\r\n"+(null!=(f=c.if.call(h,null!=b?b.bonusExpiration:b,{name:"if",hash:{},fn:a.program(9,e,0),inverse:a.noop,data:e}))?f:"")+'\t\t</div>\r\n\t\t<h2 class="list-header"></h2>\r\n\t\t<div class="message-box-buttons">\r\n\t\t\t<a class="message-bonus-activate">Activate</a>\t\t\t\t\t\r\n\t\t\t<a class="message-close">Dismiss</a>\r\n\t\t</div>\r\n\r\n\t'},9:function(a,b,c,d,e){var f;return null!=(f=(c.dateLessDays||b&&b.dateLessDays||c.helperMissing).call(null!=b?b:{},null!=b?b.bonusExpiration:b,2,{name:"dateLessDays",hash:{},fn:a.program(10,e,0),inverse:a.program(12,e,0),data:e}))?f:""},10:function(a,b,c,d,e){return'\t\t\t\t\t<div style="text-align: right;">'+a.escapeExpression((c.daysFromNow||b&&b.daysFromNow||c.helperMissing).call(null!=b?b:{},null!=b?b.bonusExpiration:b,{name:"daysFromNow",hash:{},data:e}))+"</div>\r\n"},12:function(a,b,c,d,e){var f;return null!=(f=(c.dateLessDays||b&&b.dateLessDays||c.helperMissing).call(null!=b?b:{},null!=b?b.bonusExpiration:b,30,{name:"dateLessDays",hash:{},fn:a.program(13,e,0),inverse:a.noop,data:e}))?f:""},13:function(a,b,c,d,e){return'\t\t\t\t\t\t<div style="text-align: right;">Exp. '+a.escapeExpression((c.date||b&&b.date||c.helperMissing).call(null!=b?b:{},null!=b?b.bonusExpiration:b,{name:"date",hash:{},data:e}))+"</div>\r\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:{};return'<div class="message-icon"><i class="fa fa-bell-o'+(null!=(f=c.unless.call(g,null!=b?b.shown:b,{name:"unless",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+'"></i></div>\r\n<div class="message-box">\r\n'+(null!=(f=c.if.call(g,null!=b?b.success:b,{name:"if",hash:{},fn:a.program(3,e,0),inverse:a.program(5,e,0),data:e}))?f:"")+"\r\n</div>\r\n"},useData:!0}),this.Handlebars.templates["message-cashback"]=Handlebars.template({1:function(a,b,c,d,e){return" faa-ring animated"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g,h=null!=b?b:{},i=c.helperMissing;return'<div class="message-icon"><i class="fa fa-bell-o'+(null!=(f=c.unless.call(h,null!=b?b.shown:b,{name:"unless",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+'"></i></div>\r\n<div class="message-box">\r\n\t<div class="message-text">\r\n\t\t'+(null!=(g=null!=(g=c.text||(null!=b?b.text:b))?g:i,f="function"==typeof g?g.call(h,{name:"text",hash:{},data:e}):g)?f:"")+'\r\n\t</div>\r\n\t<h2 class="list-header"></h2>\r\n\t<div class="message-box-buttons">\r\n\t\t<a class="message-'+a.escapeExpression((g=null!=(g=c.type||(null!=b?b.type:b))?g:i,"function"==typeof g?g.call(h,{name:"type",hash:{},data:e}):g))+'" href="javascript: void(0);">See Cash Back Activity</a>\r\n\t\t<a class="message-close">Dismiss</a>\r\n\t</div>\r\n</div>\r\n'},useData:!0}),this.Handlebars.templates.notification=Handlebars.template({1:function(a,b,c,d,e){var f;return null!=(f=c.if.call(null!=b?b:{},null!=b?b.activated:b,{name:"if",hash:{},fn:a.program(2,e,0),inverse:a.program(5,e,0),data:e}))?f:""},2:function(a,b,c,d,e){var f,g,h=null!=b?b:{};return'\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<span class="ebates-notification-activated">'+a.escapeExpression((g=null!=(g=c.cashBackAmount||(null!=b?b.cashBackAmount:b))?g:c.helperMissing,"function"==typeof g?g.call(h,{name:"cashBackAmount",hash:{},data:e}):g))+' Cash Back Now Active</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class="shopping-trip"><i class="fa fa-check-circle check-icon"></i>'+(null!=(f=c.if.call(h,null!=b?b.ttn:b,{name:"if",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+"</div>\r\n"},3:function(a,b,c,d,e){var f;return'Shopping Trip: #<span class="shopping-trip-number">'+a.escapeExpression((f=null!=(f=c.ttn||(null!=b?b.ttn:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:{},{name:"ttn",hash:{},data:e}):f))+"</span>"},5:function(a,b,c,d,e){var f;return'\t\t\t\t\t\t<div class="ebates-notification-button red">Activate '+a.escapeExpression((f=null!=(f=c.cashBackAmount||(null!=b?b.cashBackAmount:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:{},{name:"cashBackAmount",hash:{},data:e}):f))+" Cash Back</div>\r\n"},7:function(a,b,c,d,e){return'\t\t\t\t\t<div class="ebates-notification-button ebates-notification-button-login blue">Click to Login</div>\r\n'},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f;return'<div class="ebates-notification ebates-notification">\r\n\t<table>\r\n\t\t<tr>\r\n\t\t\t<td class="ebates-notification-logo-bg">\r\n\t\t\t\t<div class="ebates-notification-logo" style="background-image: url('+a.escapeExpression(a.lambda(null!=(f=null!=b?b.images:b)?f.largeLogo:f,b))+')"></div>\r\n\t\t\t</td>\r\n\t\t\t<td class="delimiter-bg">\r\n\t\t\t\t<div class="delimiter"></div>\r\n\t\t\t</td>\r\n\t\t\t<td>\r\n'+(null!=(f=c.if.call(null!=b?b:{},null!=b?b.loggedIn:b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.program(7,e,0),data:e}))?f:"")+"\t\t\t</td>\r\n\t\t</tr>\r\n\t</table>\r\n</div>"},useData:!0}),this.Handlebars.templates["order-date"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<h2 class="list-header">\r\n\t\t<span>'+a.escapeExpression((c.date||b&&b.date||c.helperMissing).call(null!=b?b:{},null!=b?b.orderDate:b,{name:"date",hash:{},data:e}))+"</span>\t\r\n</h2>"},useData:!0}),this.Handlebars.templates["order-empty"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<div class="eb-module">\r\n\t<div style="margin: 25px;">We don\'t see any Orders yet. </div>\r\n\t<div>Please check back in a little bit - we should finish</div>\r\n\t<div>loading your Orders soon!</div>\r\n</div>'},useData:!0}),this.Handlebars.templates["order-header"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<div style="padding: 8px;">\r\n  Thank you for trying out this new feature! <a id="orders-survey" href="https://ebates.typeform.com/to/Kttdch" target="_blank">Share</a> your thoughts and feedback with us.\r\n</div>\r\n<div class="list-box roundbottom">\r\n  <div class="loader">\r\n    <div class="eb-text-loader">Looking for your Orders now...</div>\r\n    <div><i class="fa fa-spinner fa-spin"></i></div>\r\n  </div>\r\n</div>'},useData:!0}),this.Handlebars.templates.order=Handlebars.template({1:function(a,b,c,d,e){var f,g,h=null!=b?b:{},i=c.helperMissing,j=a.escapeExpression;return'<div class="eb-shop-item" data-date="'+j((c.date||b&&b.date||i).call(h,null!=b?b.date:b,{name:"date",hash:{},data:e}))+'" data-status="'+j((g=null!=(g=c.status||(null!=b?b.status:b))?g:i,"function"==typeof g?g.call(h,{name:"status",hash:{},data:e}):g))+'">\r\n\t<div class="eb-shop-logo" style="background-image: url(\''+(null!=(f=c.if.call(h,null!=(f=null!=(f=null!=b?b.items:b)?f[0]:f)?f.imageUrl:f,{name:"if",hash:{},fn:a.program(2,e,0),inverse:a.program(4,e,0),data:e}))?f:"")+'\');">\r\n\t</div>\r\n\t<div class="eb-item-details">\r\n\t\t<div class="eb-item-name">\r\n'+(null!=(f=(c.equal||b&&b.equal||i).call(h,null!=(f=null!=b?b.items:b)?f.length:f,1,{name:"equal",hash:{},fn:a.program(6,e,0),inverse:a.program(9,e,0),data:e}))?f:"")+"\t\t</div>\r\n\t\t"+(null!=(f=(c.equal||b&&b.equal||i).call(h,null!=(f=null!=b?b.items:b)?f.length:f,1,{name:"equal",hash:{},fn:a.program(12,e,0),inverse:a.program(14,e,0),data:e}))?f:"")+'\t\t<div class="eb-item-price">Price: $'+j((g=null!=(g=c.orderTotal||(null!=b?b.orderTotal:b))?g:i,"function"==typeof g?g.call(h,{name:"orderTotal",hash:{},data:e}):g))+"</div>\r\n\t</div>\r\n"+(null!=(f=(c.equal||b&&b.equal||i).call(h,null!=b?b.status:b,"purchased",{name:"equal",hash:{},fn:a.program(16,e,0),inverse:a.noop,data:e}))?f:"")+"\r\n"+(null!=(f=(c.equal||b&&b.equal||i).call(h,null!=b?b.status:b,"shipped",{name:"equal",hash:{},fn:a.program(18,e,0),inverse:a.noop,data:e}))?f:"")+"\r\n"+(null!=(f=(c.equal||b&&b.equal||i).call(h,null!=b?b.status:b,"delivered",{name:"equal",hash:{},fn:a.program(32,e,0),inverse:a.noop,data:e}))?f:"")+"</div>\r\n"},2:function(a,b,c,d,e){var f;return a.escapeExpression(a.lambda(null!=(f=null!=(f=null!=b?b.items:b)?f[0]:f)?f.imageUrl:f,b))},4:function(a,b,c,d,e){var f;return a.escapeExpression((f=null!=(f=c.company_logo||(null!=b?b.company_logo:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:{},{name:"company_logo",hash:{},data:e}):f))},6:function(a,b,c,d,e){var f;return"\t\t\t\t"+(null!=(f=c.each.call(null!=b?b:{},null!=b?b.items:b,{name:"each",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")+"\r\n"},7:function(a,b,c,d,e){var f,g;return(null!=(g=null!=(g=c.name||(null!=b?b.name:b))?g:c.helperMissing,f="function"==typeof g?g.call(null!=b?b:{},{name:"name",hash:{},data:e}):g)?f:"")+" "},9:function(a,b,c,d,e){var f;return"\t\t\t\t"+(null!=(f=c.each.call(null!=b?b:{},null!=b?b.items:b,{name:"each",hash:{},fn:a.program(10,e,0),inverse:a.noop,data:e}))?f:"")+"\r\n"},10:function(a,b,c,d,e){var f,g;return(null!=(g=null!=(g=c.name||(null!=b?b.name:b))?g:c.helperMissing,f="function"==typeof g?g.call(null!=b?b:{},{name:"name",hash:{},data:e}):g)?f:"")+", "},12:function(a,b,c,d,e){return""},14:function(a,b,c,d,e){var f;return'\r\n\t\t\t<div class="eb-names-count"> + '+a.escapeExpression((c.sum||b&&b.sum||c.helperMissing).call(null!=b?b:{},null!=(f=null!=b?b.items:b)?f.length:f,-1,{name:"sum",hash:{},data:e}))+" more</div>\r\n"},16:function(a,b,c,d,e){return'\t\t<div class="eb-item-status">\r\n\t\t\t<span class="eb-status-purchased"></span>\r\n\t\t\t<span class="eb-status-title"><span class="eb-purchased-text">Purchased</span></span>\r\n\t\t</div>\r\n'},18:function(a,b,c,d,e){var f,g=null!=b?b:{};return(null!=(f=c.if.call(g,null!=b?b.trackingUrl:b,{name:"if",hash:{},fn:a.program(19,e,0),inverse:a.noop,data:e}))?f:"")+'\t\t<div class="eb-item-status">\r\n\t\t\t<span class="eb-status-shipping"></span>\r\n\t\t\t<span class="eb-status-title"><span class="eb-shipping-text">\r\n\t\t\t\r\n'+(null!=(f=(c.equal||b&&b.equal||c.helperMissing).call(g,null!=b?b.deliveryEstimate:b,0,{name:"equal",hash:{},fn:a.program(22,e,0),inverse:a.program(24,e,0),data:e}))?f:"")+"\r\n\t\t\t</span></span>\r\n\t\t</div>\r\n"},19:function(a,b,c,d,e){var f;return'      <div class="eb-hover-menu">\r\n        <!--<span class="eb-hover-btn eb-show eb-order-delivered">Mark Delivered</span>-->\r\n        '+(null!=(f=c.if.call(null!=b?b:{},null!=b?b.trackingUrl:b,{name:"if",hash:{},fn:a.program(20,e,0),inverse:a.noop,data:e}))?f:"")+'\t\t\r\n        <!--<span class="eb-hover-btn eb-show eb-order-deletee">Delete</span>-->\r\n      </div>\r\n'},20:function(a,b,c,d,e){return'<span class="eb-hover-btn eb-show eb-order-tracking">Tracking Info</span>'},22:function(a,b,c,d,e){return"\t\t\t\t\tToday\r\n"},24:function(a,b,c,d,e){var f;return null!=(f=(c.equal||b&&b.equal||c.helperMissing).call(null!=b?b:{},null!=b?b.deliveryEstimate:b,1,{name:"equal",hash:{},fn:a.program(25,e,0),inverse:a.program(27,e,0),data:e}))?f:""},25:function(a,b,c,d,e){return"\t\t\t\t\t\tTomorrow\r\n"},27:function(a,b,c,d,e){var f;return null!=(f=c.if.call(null!=b?b:{},null!=b?b.deliveryEstimate:b,{name:"if",hash:{},fn:a.program(28,e,0),inverse:a.program(30,e,0),data:e}))?f:""},28:function(a,b,c,d,e){var f;return"\t\t\t\t\t\t\t"+a.escapeExpression((f=null!=(f=c.deliveryEstimate||(null!=b?b.deliveryEstimate:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:{},{name:"deliveryEstimate",hash:{},data:e}):f))+" days\r\n"},30:function(a,b,c,d,e){return"\t\t\t\t\t\t\tOn the way\r\n"},32:function(a,b,c,d,e){var f;return'\t\t<!--<div class="eb-hover-menu-delivered">\r\n\t\t\t<i class="fa fa-check eb-icon-size"></i><span class="eb-hover-btn">Marking this order as delivered.</span>\r\n\t\t</div>-->\r\n'+(null!=(f=c.if.call(null!=b?b:{},null!=b?b.trackingUrl:b,{name:"if",hash:{},fn:a.program(33,e,0),inverse:a.noop,data:e}))?f:"")+'\t\t<div class="eb-item-status">\r\n\t\t\t<span class="eb-status-delivered"></span>\r\n\t\t\t<span class="eb-status-title"><span class="eb-delivered-text">Delivered</span></span>\r\n\t\t</div>\r\n'},33:function(a,b,c,d,e){var f;return'\t\t<div class="eb-hover-menu">\r\n\t\t\t'+(null!=(f=c.if.call(null!=b?b:{},null!=b?b.trackingUrl:b,{name:"if",hash:{},fn:a.program(20,e,0),inverse:a.noop,data:e}))?f:"")+'\r\n\t\t\t<!--<span class="eb-hover-btn eb-show eb-order-deletee">Delete</span>-->\r\n\t\t</div>\r\n'},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f;return null!=(f=c.if.call(null!=b?b:{},null!=b?b.items:b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:""},useData:!0}),this.Handlebars.templates["overlay-my-orders"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<div class="overlay-backdrop overlay-orders-container">\r\n\t<div class="overlay">\r\n\t  <div class="orders">\r\n      <center>\r\n        <h3>Easily track everything you buy online.</h3>\r\n        <div class="overlay-button overlay-button-blue">\r\n          Display My Orders\r\n        </div>\r\n        <div>\r\n          You\'ve already connected your Google account on Ebates.com. Now see all of your purchases in one convenient location.\r\n        </div>\t\r\n      </center>\r\n\t  </div>\r\n    <div class="overlay-footer"><a href="#" id="orders-dismiss">No thanks.</a></div>\r\n\t</div>\r\n</div>'},useData:!0}),this.Handlebars.templates["overlay-smart-cards"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f;return'<div class="overlay-container">\r\n\t<div class="overlay-backdrop"></div>\r\n\t<div class="overlay">\r\n\t  <center>\r\n\t\t\t<h5>Introducing <b>"Smart Cards"</b></h5>\r\n\t\t\t<h6><center>The new Recently Visited Stores section will tell you if any of the stores you visited lately had a change in the amount of Cash Back they offer.</center></h6>\r\n\t\t\t<p>\r\n\t\t\t\t'+(null!=(f=a.invokePartial(d["store-recent"],b,{name:"store-recent",data:e,helpers:c,partials:d,decorators:a.decorators}))?f:"")+'\t\t\t</p>\r\n\t\t\t<div class="overlay-button">Got it!</div>\r\n\t\t</center>\r\n\t</div>\r\n</div>\r\n'},usePartial:!0,useData:!0}),this.Handlebars.templates["search-deal"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:{},h=c.helperMissing,i=a.escapeExpression;return'<div class="autocomplete-suggestion autocomplete-suggestion-deal" data-id="'+i((f=null!=(f=c.storeId||(null!=b?b.storeId:b))?f:h,"function"==typeof f?f.call(g,{name:"storeId",hash:{},data:e}):f))+'" data-val="'+i((f=null!=(f=c.storeName||(null!=b?b.storeName:b))?f:h,"function"==typeof f?f.call(g,{name:"storeName",hash:{},data:e}):f))+'">\r\n\t<span class="autocomplete-store-name fa fa-tag"></span>\r\n\t<span class="autocomplete-deal-name">\r\n\t\t'+i((c.highlight||b&&b.highlight||h).call(g,null!=b?b.description:b,null!=b?b.term:b,{name:"highlight",hash:{},data:e}))+'\r\n\t\t<span class="autocomplete-store-name">+ '+i((f=null!=(f=c.cashBackAmount||(null!=b?b.cashBackAmount:b))?f:h,"function"==typeof f?f.call(g,{name:"cashBackAmount",hash:{},data:e}):f))+" at "+i((f=null!=(f=c.storeName||(null!=b?b.storeName:b))?f:h,"function"==typeof f?f.call(g,{name:"storeName",hash:{},data:e}):f))+"</span>\r\n\t</span>\r\n</div>"},useData:!0}),this.Handlebars.templates["search-item"]=Handlebars.template({1:function(a,b,c,d,e){var f;return a.escapeExpression((f=null!=(f=c.cashBackAmount||(null!=b?b.cashBackAmount:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:{},{name:"cashBackAmount",hash:{},data:e}):f))},3:function(a,b,c,d,e){var f;return"\r\n\t\t\t"+(null!=(f=(c.equal||b&&b.equal||c.helperMissing).call(null!=b?b:{},null!=(f=null!=b?b.totalReward:b)?f.display:f,"None",{name:"equal",hash:{},fn:a.program(1,e,0),inverse:a.program(4,e,0),data:e}))?f:"")},4:function(a,b,c,d,e){var f;return"\r\n\t\t\t\tActivate "+a.escapeExpression((f=null!=(f=c.cashBackAmount||(null!=b?b.cashBackAmount:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:{},{name:"cashBackAmount",hash:{},data:e}):f))+" Cash Back\r\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g,h=null!=b?b:{},i=c.helperMissing,j=a.escapeExpression;return'<div class="autocomplete-suggestion" data-id="'+j((g=null!=(g=c.storeId||(null!=b?b.storeId:b))?g:i,"function"==typeof g?g.call(h,{name:"storeId",hash:{},data:e}):g))+'" data-val="'+j((g=null!=(g=c.storeName||(null!=b?b.storeName:b))?g:i,"function"==typeof g?g.call(h,{name:"storeName",hash:{},data:e}):g))+'">\r\n\t<span class="autocomplete-store-name">'+j((c.highlight||b&&b.highlight||i).call(h,null!=b?b.storeName:b,null!=b?b.term:b,{name:"highlight",hash:{},data:e}))+'</span>\r\n\t<span class="autocomplete-store-cashBackAmount">'+j((g=null!=(g=c.cashBackAmount||(null!=b?b.cashBackAmount:b))?g:i,"function"==typeof g?g.call(h,{name:"cashBackAmount",hash:{},data:e}):g))+'</span>\r\n\t<span class="autocomplete-store-cashBackText">\r\n\t\t'+(null!=(f=(c.equal||b&&b.equal||i).call(h,null!=(f=null!=b?b.totalReward:b)?f.display:f,"Coupons",{name:"equal",hash:{},fn:a.program(1,e,0),inverse:a.program(3,e,0),data:e}))?f:"")+"\t</span>\r\n</div>"},useData:!0}),this.Handlebars.templates["store-deal"]=Handlebars.template({1:function(a,b,c,d,e){var f;return(null!=(f=(c.dateLessDays||b&&b.dateLessDays||c.helperMissing).call(null!=b?b:{},null!=b?b.expires:b,7,{name:"dateLessDays",hash:{},fn:a.program(2,e,0),inverse:a.program(4,e,0),data:e}))?f:"")+"\t\t\t\t</span>\r\n"},2:function(a,b,c,d,e){return'\t\t\t\t\t<span class="red"><i class="fa fa-clock-o"></i> <small> '+a.escapeExpression((c.daysFromNow||b&&b.daysFromNow||c.helperMissing).call(null!=b?b:{},null!=b?b.expires:b,{name:"daysFromNow",hash:{},data:e}))+"</small>\r\n"},4:function(a,b,c,d,e){return'\t\t\t\t\t<span class="black"><small>Exp. '+a.escapeExpression((c.date||b&&b.date||c.helperMissing).call(null!=b?b:{},null!=b?b.expires:b,{name:"date",hash:{},data:e}))+"</small>\r\n"},6:function(a,b,c,d,e){var f;return'\t\t\t<div class="code-wrapper">\r\n\t\t\t\t<span class="code-value">'+a.escapeExpression((f=null!=(f=c.code||(null!=b?b.code:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:{},{name:"code",hash:{},data:e}):f))+'</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="activate-button activate">Use Coupon</div>\r\n'},8:function(a,b,c,d,e){return'\t\t\t<div class="activate-button activate">Get Deal</div>\r\n'},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g,h=null!=b?b:{},i=c.helperMissing;return'<div class="store-deal-item deal-item">\r\n\t<div class="deal-text activate">\r\n\t\t'+a.escapeExpression((g=null!=(g=c.description||(null!=b?b.description:b))?g:i,"function"==typeof g?g.call(h,{name:"description",hash:{},data:e}):g))+'\r\n\t</div>\r\n\t<hr>\r\n\t<div class="footer">\r\n\t\t<div>\r\n'+(null!=(f=(c.dateLessDays||b&&b.dateLessDays||i).call(h,null!=b?b.expires:b,90,{name:"dateLessDays",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+"\t\t</div>\t\t\r\n"+(null!=(f=c.if.call(h,null!=b?b.code:b,{name:"if",hash:{},fn:a.program(6,e,0),inverse:a.program(8,e,0),data:e}))?f:"")+"\t</div>\r\n</div>"},useData:!0}),this.Handlebars.templates["store-recent"]=Handlebars.template({1:function(a,b,c,d,e){return""},3:function(a,b,c,d,e){var f,g,h=null!=b?b:{},i=c.helperMissing;return'\r\n\t\t<div class="cashback-label"><span class="cashback-amount">'+a.escapeExpression((g=null!=(g=c.cashBackAmount||(null!=b?b.cashBackAmount:b))?g:i,"function"==typeof g?g.call(h,{name:"cashBackAmount",hash:{},data:e}):g))+"</span> Cash Back</div>\r\n"+(null!=(f=(c.gt||b&&b.gt||i).call(h,null!=b?b.cashBackDifference:b,0,{name:"gt",hash:{},fn:a.program(4,e,0),inverse:a.noop,data:e}))?f:"")},4:function(a,b,c,d,e){var f;return'\t\t\t<div class="cashback-label cashback-label-recent">was <span class="cashback-amount">'+a.escapeExpression((f=null!=(f=c.cashBackAmountWas||(null!=b?b.cashBackAmountWas:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:{},{name:"cashBackAmountWas",hash:{},data:e}):f))+"</span></div>\r\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f;return'<div class="store-item store-recent-item">\r\n\t<div class="store-logo" style="background-image: url('+a.escapeExpression(a.lambda(null!=(f=null!=b?b.images:b)?f.largeLogo:f,b))+')"></div>\r\n\t'+(null!=(f=(c.equal||b&&b.equal||c.helperMissing).call(null!=b?b:{},null!=(f=null!=b?b.totalReward:b)?f.display:f,"None",{name:"equal",hash:{},fn:a.program(1,e,0),inverse:a.program(3,e,0),data:e}))?f:"")+"</div>"},useData:!0}),this.Handlebars.templates.store=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g,h=a.escapeExpression,i=null!=b?b:{},j=c.helperMissing;return'<div class="store-item">\r\n\t<div class="store-logo" style="background-image: url('+h(a.lambda(null!=(f=null!=b?b.images:b)?f.largeLogo:f,b))+')"></div>\r\n\t<div class="cashback-label"><span class="cashback-amount">'+h((g=null!=(g=c.cashBackAmount||(null!=b?b.cashBackAmount:b))?g:j,"function"==typeof g?g.call(i,{name:"cashBackAmount",hash:{},data:e}):g))+'</span> Cash Back</div>\r\n\t<div class="cashback-label cashback-label-recent">was <span class="cashback-amount">'+h((g=null!=(g=c.cashBackAmountWas||(null!=b?b.cashBackAmountWas:b))?g:j,"function"==typeof g?g.call(i,{name:"cashBackAmountWas",hash:{},data:e}):g))+"</span></div>\r\n</div>"},useData:!0}),this.Handlebars.templates["tab-my-deals"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<div id="recentStores" style="display:none">\r\n\t<h2 class="list-header"><span>Recently Visited Stores</span></h2>\r\n\t<div class="flex-box recent-stores"></div>\r\n</div>\r\n\r\n<div id="recommendedDeals">\r\n\t<h2 class="list-header"><span>My Deals</span></h2>\r\n\t<div class="flex-box">\r\n\t\t<div class="loader"><div><i class="fa fa-spinner fa-spin"></i></div></div>\r\n\t</div>\r\n</div>'},useData:!0}),this.Handlebars.templates["tab-promo"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:{},h=c.helperMissing,i=a.escapeExpression;return'<div>\r\n\t<h2 class="list-header"><span><b>Triple Cash Back ends '+i((c.fromNow||b&&b.fromNow||h).call(g,null!=b?b.expires:b,{name:"fromNow",hash:{},data:e}))+'</b></span></h2>\r\n\t<a href="'+i((f=null!=(f=c.url||(null!=b?b.url:b))?f:h,"function"==typeof f?f.call(g,{name:"url",hash:{},data:e}):f))+'" target="_blank" id="promo-banner">\r\n\t\t<div></div>\r\n\t</a>\r\n</div>\r\n\r\n<div>\r\n\t<h2 class="list-header"><span><b>Featured Stores</b></span></h2>\r\n\t<div class="flex-box roundbottom promo-stores" style="flex-direction: row;"></div>\r\n</div>'},useData:!0}),this.Handlebars.templates["tab-store-deals"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<div id="storeDeals">\r\n\t<div class="flex-box">\r\n\t\t<div class="loader"><div><i class="fa fa-spinner fa-spin"></i></div></div>\r\n\t</div>\r\n</div>'},useData:!0}),this.Handlebars.templates.taf=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g,h=a.escapeExpression,i=null!=b?b:{},j=c.helperMissing;return'<div class="main-offer">\r\n\t<div class="offer-header">\r\n\t\t<img class="refimg" height="130" width="380" src="'+h(a.lambda(null!=(f=null!=b?b.refsettings:b)?f.referImageToolbar:f,b))+'">\r\n\t\t<div class="offer-description">Copy this link and send it to your friends</div>\r\n\t</div>\r\n\t<div class="copylink">\r\n\t\t<input id="referralLink" class="referralLink" readonly value="'+h((g=null!=(g=c.referralLink||(null!=b?b.referralLink:b))?g:j,"function"==typeof g?g.call(i,{name:"referralLink",hash:{},data:e}):g))+'&eeid=29041"/><div class="copylink-button">Copy</div>\r\n\t\t<span class="arrow-box">Link copied to clipboard</span>\r\n\t</div>\r\n\t<h2 class="list-header" style="margin: 8px 0;"><span>or</span></h2>\r\n\t<div class="import-button-wrapper">\r\n\t\t<span class="import-button email">Email</span>\r\n\t\t<span class="import-button facebook">Facebook</span>\r\n\t\t<span class="import-button twitter">Twitter</span>\r\n\t</div>\r\n\t<hr style="display: block; height: 1px; border: 0; border-top: 1px solid #ccc; margin: 1em 0; padding: 0; width: 100%;"/>\r\n\t<div class="myoffer-links">\r\n\t\t<span class="link-status">See status of my referrals</span>\r\n\t\t<span class="link-how">How It works <i class="fa fa-question-circle"></i></span>\r\n\t</div>\r\n</div>\r\n\r\n\r\n<div class="email-offer" style="display: none;">\r\n\t<div class="offer-header">\r\n\t\t<div class="offer-description">\r\n\t\t\t<p>Sorry, invitations by email are currently unavailable. </p>\r\n\t\t\t<p>Please copy and paste your personalized link into emails from your favorite mail client.</p>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="copylink">\r\n\t\t<input id="referralLink" class="referralLink" readonly value="'+h((g=null!=(g=c.referralLink||(null!=b?b.referralLink:b))?g:j,"function"==typeof g?g.call(i,{name:"referralLink",hash:{},data:e}):g))+'&eeid=29041"/><div class="copylink-button">Copy</div>\r\n\t\t<span class="arrow-box">Link copied to clipboard</span>\r\n\t</div>\r\n</div>\r\n\r\n<div class="email-offer-tmp" style="display: none;">\r\n\t<div style="font-size: 14px; text-align: center; margin-top: 16px;">Type in the email address of the people you want to invite</div>\r\n\t<textarea rows="1" class="import-emails" spellcheck="false" tabindex="-1"></textarea>\r\n\r\n\t<div class="import-button-wrapper">\r\n\t\t<div class="invite-button">Invite</div>\r\n\t</div>\r\n\t<div class="gmail-block" style="display: none;">\r\n\t\t<h2 class="list-header" style="margin: 16px 0;"><span>OR</span></h2>\r\n\t\t<div class="import-button-wrapper">\r\n\t\t\t<span class="import-button gmail"><span class="gmail-icon"></span><span style="margin: 0 6px;">Find Gmail Contacts</span>\r\n\t\t</div>\r\n\t\t<div style="font-size: 12px; text-align: center; font-weight: 400;">Import your address book for easler friend selection</div>\r\n\t</div>\r\n</div>\r\n\r\n<div class="gmail-offer" style="display: none;">\r\n\t<div style="font-size: 14px; text-align: center;">Authorization</div>\r\n</div>'},useData:!0});var DailyDealView=Backbone.View.extend({template:Handlebars.templates["daily-deal"],event_type:"shop_now_coupon",events:{"click .code-value":function(a){return!1},click:function(){var a=this.model.toJSON(),b=EBATES.merchants.findWhere({storeId:this.model.get("storeId")});stat(["_trackEvent",popup.tabs.tab,"ShopNow",b.get("domainName"),null,popup.tabs.page]),EBATES.log({event_type:this.event_type,merchant_id:a.storeId,coupon_id:a.id,destination:a.shoppingURL,coupon_rank:this.model.collection.indexOf(this.model)}),framework.browser.navigate({url:a.shoppingURL,tabId:framework.browser.NEWTAB}),window.close()}},initialize:function(){},render:function(){return this.setElement($(this.template(this.model.toJSON()))),this.$el}}),StoreDealView=DailyDealView.extend({template:Handlebars.templates["store-deal"],event_type:"merchant_shop_now_coupon"}),DealsView=Backbone.View.extend({el:"#myDeals-scrollbox",initialize:function(a){new StoreDealsView({collection:this.collection}),this.render(),popup.tabs.page||popup.tabs.switchTab("#btnMyDeals",!0)}}),StoreDealsView=Backbone.View.extend({el:"#storeDeals",initialize:function(){var a=this;this.$el.fadeIn(),this.collection.fetch().catch(function(){}).then(function(){a.render()})},render:function(){var a=this.$(".flex-box").empty();this.collection.each(function(b){b.toJSON()&&a.append(new StoreDealView({model:b}).render())}),window.popup.renderScrollbar()}}),RecommendedDealsView=Backbone.View.extend({el:"#recommendedDeals",initialize:function(){var a=this;this.collection.fetch().catch(function(){}).then(function(){return a.render()})},render:function(){var a=this.$(".flex-box").empty();if("Edge"===framework.browser.name){var b=JSON.parse(JSON.parse(localStorage.merchants).responseText).domainEntities;this.collection.each(function(c){var d=_.findWhere(b,c.pick("storeId"));d&&d.shoppingURL&&a.append(new DailyDealView({model:c}).render())})}else if("Firefox"===framework.browser.name){var c=[];EBATES.merchants.each(function(a){c[a.get("storeId")]=!0}),this.collection.each(function(b){c[b.get("storeId")]&&a.append(new window.DailyDealView({model:b
}).render())})}else this.collection.each(function(b){var c=EBATES.merchants.findWhere(b.pick("storeId"));c&&c.get("shoppingURL")&&a.append(new window.DailyDealView({model:b}).render())});window.popup.renderScrollbar()}});window.FooterView=Backbone.View.extend({el:"#footer",events:{"click .footer_button.settings":function(){window.stat(["_trackEvent",popup.tabs.tab,"Settings","Ebates"]),EBATES.log({event_type:"settings"}),Utils.openOptionsPage(),window.close()},"click .footer_button.help":function(){window.stat(["_trackEvent",popup.tabs.tab,"Help","Ebates"]),EBATES.log({event_type:"help"}),framework.browser.navigate({url:"https://help.ebates.com/hc/en-us",tabId:framework.browser.NEWTAB}),window.close()},"click .footer_button.account":function(){window.stat(["_trackEvent",popup.tabs.tab,"My Ebates","Ebates"]),EBATES.log({event_type:"member_info_click",destination:background.substitute(background.URL.WEB_ACCOUNT)}),framework.browser.navigate({url:background.substitute(background.URL.WEB_ACCOUNT),tabId:framework.browser.NEWTAB}),window.close()}},show:function(){},initialize:function(){this.render()},render:function(){return this.$el}}),window.HeaderView=Backbone.View.extend({el:"#header",show:function(){this.$el.is(":hidden")&&this.$el.slideDown({duration:400,step:function(a,b){if("height"==b.prop){var c=423-a+"px";$("#tabs .scrollContainer").css("height",c)}}})},initialize:function(){this.render()},render:function(){var a=$(this.template(this.model.toJSON()));this.$el.replaceWith(a),this.setElement(a)}}),window.MerchantHeaderView=window.HeaderView.extend({template:Handlebars.templates.notification,events:{"click .logo":function(){window.stat(["_trackEvent",popup.tabs.tab,"Logo","Ebates"]),EBATES.log({event_type:"header_logo",destination:background.substitute(background.URL.WEB_HOME)}),framework.browser.navigate({url:background.substitute(background.URL.WEB_HOME),tabId:framework.browser.NEWTAB}),window.close()},"click .ebates-notification-button.red":function(a){window.stat(["_trackEvent","Popup","Activate",popup.domain,null,popup.tabs.page]),EBATES.log({event_type:"activate_widget",merchant_id:this.model.get("storeId")}),this.model.activate({url:background.currentUrl,tabId:background.currentTab}),_.delay(window.close,500)}}}),window.MemberHeaderView=window.HeaderView.extend({template:Handlebars.templates.header,events:{"click .logo":function(){window.stat(["_trackEvent",popup.tabs.tab,"Logo","Ebates"]),EBATES.log({event_type:"header_logo",destination:background.substitute(background.URL.WEB_HOME)}),framework.browser.navigate({url:background.substitute(background.URL.WEB_HOME),tabId:framework.browser.NEWTAB}),window.close()},"click .reward-pending":function(){window.stat(["_trackEvent",popup.tabs.tab,"Pending","Ebates"]),EBATES.log({event_type:"cash_back_pending",member_info_field_clicked_on:"labelRewardPending",destination:background.substitute(background.URL.WEB_REWARDS)}),framework.browser.navigate({url:background.substitute(background.URL.WEB_REWARDS),tabId:framework.browser.NEWTAB}),window.close()},"click .reward-total":function(){window.stat(["_trackEvent",popup.tabs.tab,"Earned","Ebates"]),EBATES.log({event_type:"cash_back_earned",member_info_field_clicked_on:"labelRewardPending",destination:background.substitute(background.URL.WEB_CASHBACK)}),framework.browser.navigate({url:background.substitute(background.URL.WEB_CASHBACK),tabId:framework.browser.NEWTAB}),window.close()}}}),function(a){a.fn.autoComplete=function(b){var c=a.extend({},a.fn.autoComplete.defaults,b);return"string"==typeof b?(this.each(function(){var c=a(this);"destroy"==b&&(a(window).off("resize.autocomplete",c.updateSC),c.off("blur.autocomplete focus.autocomplete keydown.autocomplete keyup.autocomplete"),c.data("autocomplete")?c.attr("autocomplete",c.data("autocomplete")):c.removeAttr("autocomplete"),a(c.data("sc")).remove(),c.removeData("sc").removeData("autocomplete"))}),this):this.each(function(){function b(b,c){var d=a(b).offset().top,e=d+a(b).outerHeight(!0),f=a(c).offset().top;return bottom=f+a(c).outerHeight(!0),e>=f&&d<=bottom}function d(){var d=[];f.sc.find(".autocomplete-suggestion").each(function(){b(this,f.sc.get(0))&&(g.indexOf(this)<0&&c.onAppear(a(this)),d.push(this))}),g=d}function e(a){var b=f.val();if(f.cache[b]=a,a.length&&b.length>=c.minChars){for(var d="",e=0;e<a.length;e++)d+=c.renderItem(a[e],b);f.sc.html(d),f.updateSC(0)}else f.sc.hide().trigger("hide")}var f=a(this);f.sc=a('<div class="autocomplete-suggestions '+c.menuClass+'"></div>'),f.data("sc",f.sc).data("autocomplete",f.attr("autocomplete")),f.attr("autocomplete","off"),f.cache={},f.last_val="",f.updateSC=function(b,c){if(f.sc.css({top:f.offset().top+f.outerHeight(),left:f.offset().left,width:f.outerWidth()}),!b&&(f.sc.show().trigger("show").trigger("scroll"),f.sc.maxHeight||(f.sc.maxHeight=parseInt(f.sc.css("max-height"))),f.sc.suggestionHeight||(f.sc.suggestionHeight=a(".autocomplete-suggestion",f.sc).first().outerHeight()),f.sc.suggestionHeight))if(c){var d=f.sc.scrollTop(),e=c.offset().top-f.sc.offset().top;e+f.sc.suggestionHeight-f.sc.maxHeight>0?f.sc.scrollTop(e+f.sc.suggestionHeight+d-f.sc.maxHeight):e<0&&f.sc.scrollTop(e+d)}else f.sc.scrollTop(0)},a(window).on("resize.autocomplete",f.updateSC),f.sc.appendTo("body"),f.sc.on("mouseleave",".autocomplete-suggestion",function(){a(".autocomplete-suggestion.selected").removeClass("selected")}),f.sc.on("mouseenter",".autocomplete-suggestion",function(){a(".autocomplete-suggestion.selected").removeClass("selected"),a(this).addClass("selected")}),f.sc.on("mouseup",".autocomplete-suggestion",function(b){var d=a(this),e=d.data("val");(e||d.hasClass("autocomplete-suggestion"))&&(f.val(e),c.onSelect(b,e,d),f.sc.hide().trigger("hide"))});var g=[],h=0;f.sc.on("scroll.autocomplete",function(){window.clearTimeout(h),h=window.setTimeout(d,250)}),f.on("blur.autocomplete",function(){var b;try{b=a(".autocomplete-suggestions:hover").length}catch(a){b=0}b?f.is(":focus")||f.focus():(f.last_val=f.val(),f.sc.hide().trigger("hide"))}),c.minChars||f.on("focus.autocomplete",function(){f.last_val="\n",f.trigger("keyup.autocomplete")}),f.on("keydown.autocomplete",function(b){if((40==b.which||38==b.which)&&f.sc.html()){var d,e=a(".autocomplete-suggestion.selected",f.sc);return e.length?(d=40==b.which?e.next(".autocomplete-suggestion"):e.prev(".autocomplete-suggestion"),d.length?(e.removeClass("selected"),f.val((f.data("val")?f.data("val"):"")+d.addClass("selected").data("val"))):(e.removeClass("selected"),f.val(f.last_val),d=0)):(d=40==b.which?a(".autocomplete-suggestion",f.sc).first():a(".autocomplete-suggestion",f.sc).last(),f.val((f.data("val")?f.data("val"):"")+d.addClass("selected").data("val"))),f.updateSC(0,d),!1}if(27==b.which)f.val(f.last_val).sc.hide().trigger("hide");else if(13==b.which){var e=a(".autocomplete-suggestion.selected",f.sc);e.length&&(c.onSelect(b,e.data("val"),e),setTimeout(function(){f.sc.hide().trigger("hide")},10))}}),f.on("keyup.autocomplete",function(b){if(!~a.inArray(b.which,[13,27,38,40,37,39])){var d=f.val();if(d.length>=c.minChars){if(d!=f.last_val){if(f.last_val=d,clearTimeout(f.timer),c.cache){if(d in f.cache)return void e(f.cache[d]);for(var g=1;g<d.length-c.minChars;g++){var h=d.slice(0,d.length-g);if(h in f.cache&&!f.cache[h].length)return void e([])}}f.timer=setTimeout(function(){c.source(d,e)},c.delay)}}else f.last_val=d,f.sc.hide().trigger("hide")}})})},a.fn.autoComplete.defaults={source:0,minChars:3,delay:150,cache:1,menuClass:"",renderItem:function(a,b){var c=new RegExp("("+b.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+a+'">'+a.replace(c,"<b>$1</b>")+"</div>"},onSelect:function(a,b,c){},onAppear:function(a){}}}(jQuery),window.MessageView=Backbone.View.extend({tagName:"div",className:"message",events:{},initialize:function(a){_.extend(this.events,window.MessageView.prototype.events),this.view=a.view},close:function(){var a=this;return window.stat(["_trackEvent","My Messages","Click","cashback"===this.model.get("type")?"Click CB Dismiss":"Click Bonus Dismiss"]),this.hide().then(function(){a.model.destroy()}),!1},hide:function(){var a=this;return new Promise(function(b,c){a.$el.transition({height:0,opacity:0},function(){a.remove(),a.view.onModelRemoved(),b()})})},render:function(){return window.stat(["_trackEvent","My Messages","cashback"===this.model.get("type")?"Display CB Message":"Display Bonus Message",this.model.collection.indexOf(this.model)+1]),this.$el.html($(this.template(this.model.toJSON()))),this.model.set({shown:!0}),this.$el}}),window.CashbackMessageView=window.MessageView.extend({template:Handlebars.templates["message-cashback"],events:{"click .message-close":"close","click .message-cashback":function(){window.stat(["_trackEvent","My Messages","Click CB Activity"]),framework.browser.navigate({url:"https://www.ebates.com/pending-cash-back.htm?tb=yes&eeid=26117",tabId:framework.browser.NEWTAB}),_.delay(function(){window.close()},100)}}}),window.MessagesView=Backbone.View.extend({el:"#messages",initialize:function(a){this.collection.findWhere({shown:!1})&&window.stat(["_trackEvent","My Messages","Click Icon"]),this.listenTo(this.collection,{add:this.onModelAdded}),this.render()},onModelAdded:function(a){this.viewFactory(a)},onModelRemoved:function(){window.popup.renderScrollbar(),0===this.$(".messages").children().length&&this.$el.hide()},viewFactory:function(a){if(a.toJSON()){var b=void 0;switch(a.get("type")){case"cashback":b=CashbackMessageView}b?(this.$el.show(),this.$(".messages").prepend(new b({model:a,view:this}).render())):a.set({shown:!0})}},render:function(){var a=this;this.collection.length>0&&this.collection.each(function(b){return a.viewFactory(b)}),window.popup.renderScrollbar()}});var OrderItemView=Backbone.View.extend({template:Handlebars.templates.order,events:{"mouseenter .eb-item-status":"showHoverMenu","mouseleave .eb-shop-item":"hideHoverMenu","click .eb-order-delivered":"markDelivered","click .eb-order-tracking":"trackingInfo","click .eb-order-delete":"deleteView"},showHoverMenu:function(a){var b=this;this.$(".eb-hover-menu").length&&this.$(".eb-hover-menu").stop().css({display:"flex"}).transition({opacity:1,complete:function(){return window.stat(["_trackPageview","/virtual/MyOrders/"+b.model.get("status")])}})},hideHoverMenu:function(a){this.$(".eb-hover-menu").stop().transition({opacity:"0"}).css({display:"none"})},markDelivered:function(a){var b=this;window.stat(["_trackEvent","My Orders","Click "+this.model.get("status"),"Mark as Delivered"]),this.model.set({status:"delivered"}),this.$(".eb-shop-item").find(".eb-hover-menu-delivered").css({display:"flex"}).transition({opacity:"1"}),_.delay(function(){b.$(".eb-shop-item").find(".eb-hover-menu-delivered").transition({opacity:"0"}).css({display:"none"})},3e3)},trackingInfo:function(a){window.stat(["_trackEvent","My Orders","Click "+this.model.get("status"),"Tracking Info"]),framework.browser.navigate({url:this.model.get("trackingUrl"),tabId:framework.browser.NEWTAB}),window.close()},deleteView:function(){var a=this;window.stat(["_trackEvent","My Orders","Click "+this.model.get("status"),"Delete"]),this.$(".eb-shop-item").transition({height:0,opacity:0,complete:function(){return a.model.destroy()}})},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el},initialize:function(){this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"change:status",this.render)}});window.MyOrdersConnectView=Backbone.View.extend({el:"#myOrders-scrollbox",template:Handlebars.templates["overlay-my-orders"],events:{"click .overlay-button":function(){window.stat(["_trackEvent","My Orders","Enable My Orders"]),this.model.login()&&window.close()}},render:function(){return this.$el.find(".loader").length&&(this.$el.html($(this.template()).find(".overlay")),this.$(".overlay-footer").remove()),this.$el}}),window.MyOrdersView=Backbone.View.extend({el:"#myOrders-scrollbox",renderedItems:0,itemsPerPage:20,templateDate:Handlebars.templates["order-date"],templateEmpty:Handlebars.templates["order-empty"],templateHeader:Handlebars.templates["order-header"],events:{"click #orders-survey":function(){window.stat(["_trackEvent","My Orders","Survey"])},"click .orders-load-more":function(){},"click .orders-load":function(a){var b=a.currentTarget.getAttribute("data-key"),c=$("<div />");$(a.currentTarget).parent(".list-header").replaceWith(c),this.renderItems(c,this.ordersByYear[b])},scroll:function(){if(500-this.$(".jspPane").offset().top>this.$(".jspPane").height()&&!this.loading)if(this.model.orders.meta&&this.model.orders.meta.next)this.loadMore();else if(this.renderedItems<this.model.orders.length)return this.renderItems(),!1}},initialize:function(){var a=this;this.once("tab.shown",function(){a.model.has("access_token")&&a.model.loadOrders()}),this.listenTo(this.model.orders,"sync error",function(){return a.render()}),this.listenTo(this.model,"change:access_token",function(b){a.model.has("access_token")?a.loadOrders():new window.MyOrdersConnectView({model:b}).render()}),this.model.has("access_token")||new window.MyOrdersConnectView({model:this.model}).render(),this.listenTo(this.model.orders,"destroy",function(){$(".list-header+.list-header").prev().remove(),$.each(a.$(".list-header"),function(a,b){$(b).next().length||$(b).remove()}),a.$(".eb-shop-item").length||a.render()})},loadOrders:function(){this.$el.html(this.templateHeader())},loadMore:function(){var a=this;this.loading=!0,this.$el.addClass("scroll-lock"),this.$(".list-box").append('<div class="loader" style="height:50px"><i class="fa fa-spinner fa-spin"></i></div>'),this.model.orders.fetch({force:!0,remove:!1,silent:!0,data:{offset:this.model.orders.meta.offset+this.model.orders.meta.limit,limit:this.model.orders.meta.limit}}).catch(function(){}).then(function(){a.$(".list-box .loader").remove(),a.renderItems(a.renderedItems,a.model.orders.length-1),a.loading=!1}),this.$el.jScrollPane("scrollToBottom"),this.$el.removeClass("scroll-lock")},renderItems:function(a,b){var c=this;this.$el.addClass("scroll-lock");var d=a||this.renderedItems,e=b||Math.min(this.renderedItems+this.itemsPerPage,this.model.orders.length-1),f=this.model.orders.at(d-1),g=this.$(".list-box");_.each(this.model.orders.slice(d,e),function(a){f&&moment(f.get("orderDate")).format("DD")==moment(a.get("orderDate")).format("DD")||g.append(c.templateDate(a.toJSON())),g.append(new OrderItemView({model:a}).render()),f=a,c.renderedItems++}),_.delay(function(){return c.$el.removeClass("scroll-lock")},500)},render:function(){return this.$(".loader").remove(),this.model.orders.length>0?this.renderItems(0,this.model.orders.length):this.$(".list-box").html(this.templateEmpty()),this.$el.jScrollPane({mouseWheelSpeed:20,autoReinitialise:!0,autoReinitialiseDelay:200}),this.$el}}),window.OverlayView=Backbone.View.extend({parent:"body",events:{click:function(){var a=this;this.$el.fadeOut(function(){a.remove(),popup.renderOverlay()})}},initialize:function(){this.model.set({shown:!0}),this.model.collection.save(),this.model.get("category")&&(window.stat(["_trackEvent",this.model.get("category"),"Click Icon"]),window.stat(["_trackEvent",this.model.get("category"),"Display Overlay"]))},render:function(){this.setElement($(this.template(this.model.toJSON()))),this.$el.appendTo(this.parent)}}),window.TAFSmartCardsOverlayView=window.OverlayView.extend({template:Handlebars.templates["overlay-smart-cards"],render:function(){this.setElement($(this.template(EBATES.merchants.recent.first().toJSON()))),this.$el.appendTo(document.body)}}),window.MyOrdersOverlayView=window.OverlayView.extend({template:Handlebars.templates["overlay-my-orders"],events:{"click #orders-dismiss":function(){EBATES.settings.save("ordersDisabled",!0),popup.tabs.removeTab("#btnMyOrders",!0),popup.tabs.switchTab("#btnMyDeals",!0),window.stat(["_trackEvent","My Orders","Not Interested"]),this.remove()},"click .overlay-button":function(){EBATES.member.orders.save({access_token:background.autoLoginId}),window.stat(["_trackEvent","My Orders","Enable My Orders"]),this.setElement(".overlay-orders-container"),this.remove(),new window.MyOrdersView({model:EBATES.member.orders}),EBATES.member.orders.loadOrders()},click:function(){}}}),window.webext=window.browser||window.chrome;var background,EBATES,ERRORS,stat;Promise.all([getBackground(),waitLoadDOMContent()]).then(function(){window.EBATES=window.background.EBATES,window.ERRORS=EBATES.errors,window.stat=window.background.stat,EBATES.merchants.rewards.fetch().catch(function(){}).then(function(){window.popup=new window.PopupView,window.popup.render()})}),Handlebars.partials=Handlebars.templates,$(document).ajaxError(function(a,b,c,d){var e;e=d?200===b.status?d.message:b.responseJSON.error.message:b.statusText+": no connection",ERRORS.add({code:"Network Error: "+b.status,source:c.url,details:e,timestamp:_.now()})}),$(window).on("error",function(a){ERRORS.add({code:"javascript",source:a.originalEvent.filename+":"+a.originalEvent.lineno,details:a.originalEvent.message,timestamp:_.now()})}),window.PopupView=Backbone.View.extend({el:"body",merchant:null,events:{keydown:function(a){if(9==a.keyCode)return!1}},initialize:function(){var a=this,b=location.hash?location.hash.substr(1):background.currentUrl;this.merchant=EBATES.merchants.match(b),this.domain=background.Utils.getDomain(b),this.merchantMode=this.merchant&&this.merchant.get("settings_popup");var c=this.merchant&&this.merchant.get("storeId")?this.merchant.get("storeId"):null,d=function(){EBATES.log({event_type:c?"icon_click_merchant_close":"icon_click_non_merchant_close",merchant_id:c}),a.messages&&(a.messages.remove(),a.remove())};$(window).one("Safari"===framework.browser.name?"blur":"unload",d)},render:function(){var a=this;EBATES.settings.refsettings.fetch().catch(function(){}).then(function(){a.footer=new window.FooterView,a.tabs=new window.TabsView,a.messages=new window.MessagesView({collection:EBATES.member.messages}),EBATES.member.fetch().catch(function(){}).then(function(){!EBATES.settings.get("ordersDisabled")&&EBATES.member.get("oneReceiptEnabled")&&"Chrome"===framework.browser.name?EBATES.member.overlays.findWhere({id:"my-orders",shown:!1})||(a.orders=new window.MyOrdersView({model:EBATES.member.orders})):a.tabs.removeTab("#btnMyOrders"),new window.ReferView({model:EBATES.member}),a.renderHeader(),a.renderOverlay(),a.renderTab()})})},renderHeader:function(){this.merchantMode?this.header=new window.MerchantHeaderView({model:this.merchant}):this.header=new window.MemberHeaderView({model:EBATES.member})},renderTab:function(){var a=EBATES.settings.promos&&EBATES.settings.promos.findWhere({active:!0,popup:!0});this.merchantMode?this.tab=new window.StoreDealsTabView:this.tab=a?new window.PromoTabView({model:a}):new window.MyDealsTabView,this.tab.render()},renderScrollbar:function(){var a=this.$("#myDeals-scrollbox").data("jsp");a?a.reinitialise():this.$("#myDeals-scrollbox").jScrollPane({verticalGutter:-2,mouseWheelSpeed:20,autoReinitialise:!1}),window.scrollTo(0,0)},renderOverlay:function(){var a=EBATES.member.overlays.find(function(a){return!a.get("shown")&&("my-orders"===a.id&&"Chrome"===framework.browser.name||"my-orders"!=a.id)});a?a.get("view")&&window[a.get("view")]?(new(window[a.get("view")])({model:a}).render(),a.get("tab")&&($(".tab").show(),this.tabs.switchTab(a.get("tab"),!0))):(a.set({shown:!0}),EBATES.member.overlays.save()):"Safari"===framework.browser.name&&window.setTimeout(function(){$(document.body).css({"max-height":"1px",overflow:"hidden"}),window.setTimeout(function(){$(document.body).css({"max-height":"auto",overflow:"visible"})},1)},150)}}),window.TabView=Backbone.View.extend({el:"#main-tab",render:function(){return popup.tabs.page||popup.tabs.switchTab("#btnMyDeals",!0),this.$el.html(this.template(this.model?this.model.toJSON():null)),this.$el}}),window.MyDealsTabView=window.TabView.extend({page:"/top_deals",template:Handlebars.templates["tab-my-deals"],render:function(){TabView.prototype.render.apply(this,arguments),new SearchView,new RecentStoresView({collection:EBATES.merchants.recent}),new RecommendedDealsView({collection:EBATES.member.topDeals}),EBATES.log({event_type:"icon_click_non_merchant_open"}),stat(["_trackEvent","Popup","IconClickNonMerch",popup.domain,null,popup.tabs.page])}}),window.StoreDealsTabView=window.TabView.extend({page:"/store_deals",template:Handlebars.templates["tab-store-deals"],render:function(){popup.tabs.noHeaderScrollWhenActivate=!0,window.TabView.prototype.render.apply(this,arguments),$("#btnMyDeals").text("Store Deals"),new window.DealsView({collection:popup.merchant.deals}),EBATES.log({event_type:"icon_click_merchant_open",merchant_id:popup.merchant.get("storeId")}),stat(["_trackEvent","Popup",popup.merchant.get("activated")?"IconClickActive":"IconClickNonActive",popup.domain,null,popup.tabs.page])}}),window.PromoTabView=window.TabView.extend({page:"/promo",template:Handlebars.templates["tab-promo"],events:{"click #promo-banner":function(){stat(["_trackEvent",this.model.id,"Click Banner",null,null,popup.tabs.page])}},initialize:function(){this.page="/"+this.model.get("id")},render:function(){this.model.set({shown:!0}),window.TabView.prototype.render.apply(this,arguments),new window.SearchView,new window.PromoStoresView({promo:this.model,collection:this.model.campaigns.findWhere({popup:!0}).stores}),EBATES.log({event_type:"icon_click_non_merchant_open"}),stat(["_trackEvent","Popup","IconClickNonMerch",popup.domain,null,popup.tabs.page])}}),window.PromoStoreView=Backbone.View.extend({template:Handlebars.templates.store,event_type:"shop_now_promo_store",events:{click:function(){var a=this.model.toJSON();stat(["_trackEvent",this.promo.id,"ShopNow",a.domainName,null,popup.tabs.page]),EBATES.log({event_type:this.event_type,merchant_id:a.storeId,destination:a.shoppingURL,coupon_rank:this.model.collection.indexOf(this.model)}),framework.browser.navigate({url:a.shoppingURL,tabId:framework.browser.NEWTAB}),window.close()}},initialize:function(a){this.promo=a.promo},render:function(){return this.setElement($(this.template(this.model.toJSON()))),this.$el}}),window.PromoStoresView=Backbone.View.extend({el:".promo-stores",initialize:function(a){var b=this;this.promo=a.promo,this.collection&&this.collection.fetch().catch(function(){}).then(function(){b.collection.length?b.render():(popup.tab=new MyDealsTabView,popup.tab.render())})},render:function(){var a=this,b=this.$el.empty();this.collection.each(function(c){c&&c.toJSON()&&b.append(new PromoStoreView({model:c,promo:a.promo}).render())}),window.popup.renderScrollbar()}});var ReferView=Backbone.View.extend({el:"#tafPanel",GmailContacts:[],template:Handlebars.templates.taf,emailTemplate:Handlebars.templates["contacts-search-item"],events:{"click .import-button.facebook":function(a){stat(["_trackEvent","TAF","Facebook"]),EBATES.log({event_type:"taf_facebook"}),this.openWindow("http://www.facebook.com/dialog/share?"+$.param({display:"Safari"===framework.browser.name?"page":"popup",app_id:0xc2ee9ccb8e0a,href:this.$(".copylink input").val(),redirect_uri:background.substitute(background.URL.WEB_TAF)}),650,480)},"click .import-button.twitter":function(a){stat(["_trackEvent","TAF","Twitter"]),EBATES.log({event_type:"taf_twitter"}),this.openWindow("https://twitter.com/intent/tweet?"+$.param({text:"I get cash back when I buy things online with @Ebates You'll also get a $10 gift card after signing up. "+this.$(".copylink input").val()}),550,400)},"click .import-button.email":function(){stat(["_trackEvent","TAF","Email"]),EBATES.log({event_type:"taf_email"}),$(".main-offer").fadeOut(300,function(){$(".email-offer").fadeIn(300),stat(["_trackPageview","/button-popup/taf_email"]),EBATES.log({event_type:"taf_email_page_view"})})},"click .copylink":function(a){var b=this;stat(["_trackEvent","TAF","Copy","Link"]),EBATES.log({event_type:"taf_copy_link"});var c=$(a.currentTarget).find("input");Utils.CopyToClipboard(c.val()),this.$(".arrow-box").fadeIn(),this.$(".copylink-button").text("Copied"),_.delay(function(){b.$(".arrow-box").fadeOut(),b.$(".copylink-button").text("Copy")},3e3)},"click .link-status":function(){stat(["_trackEvent","TAF","Status"]),EBATES.log({event_type:"taf_status"}),framework.browser.navigate({url:background.substitute(background.URL.WEB_REFERRAL),tabId:framework.browser.NEWTAB}),window.close()},"click .link-how":function(){stat(["_trackEvent","TAF","How"]),EBATES.log({event_type:"taf_how"}),framework.browser.navigate({url:background.substitute(background.URL.WEB_REFERRAL),tabId:framework.browser.NEWTAB}),window.close()}},initialize:function(){this.render()},openWindow:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:550,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:400;["Safari","Edge"].includes(framework.browser.name)?(framework.browser.navigate({url:a,tabId:framework.browser.NEWTAB}),window.close()):window.open(a,"Ebates","width="+b+", height="+c+",left="+(screen.availWidth-b)/2+",top="+(screen.availHeight-c)/2)},render:function(){return this.$el.html(this.template(_.extend(this.model.toJSON(),{refsettings:EBATES.settings.refsettings.toJSON()}))),"Safari"===framework.browser.name&&(this.$(".copylink-button").remove(),this.$(".arrow-box").remove(),this.$(".referralLink").css({width:"100%"}).removeAttr("readonly")),this.$el}}),SearchView=Backbone.View.extend({el:".search-container",events:{"keypress .search-terms":function(a){"13"==a.which?this.search():this.startedTyping||(this.startedTyping=!0,stat(["_trackEvent",popup.tabs.tab,"Search"]))},"click .search-button":"search"},search:function(){var a=this.$(".search-terms").val(),b=background.substitute(this.url.replace("{terms}",a));stat(["_trackEvent",popup.tabs.tab,"Search",a]),EBATES.log({event_type:"search",input:a,destination:b}),framework.browser.navigate({url:b}),window.close()},initialize:function(){this.url=background.URL.WEB_SEARCH,this.$el.show(),$(document.body).on("show",".autocomplete-suggestions",function(){$(".autocomplete-backdrop").fadeIn(100)}).on("hide",".autocomplete-suggestions",function(){$(".autocomplete-backdrop").fadeOut(100)}),this.$(".search-terms").autoComplete({minChars:1,cache:!1,source:function(a,b){b(EBATES.merchants.search(a.toLowerCase()))},renderItem:function(a,b){return a.description?Handlebars.templates["search-deal"](_.extend({term:b},a)):Handlebars.templates["search-item"](_.extend({term:b},a))},onSelect:function(a,b,c){var d=EBATES.merchants.findWhere({storeId:c.data("id")});EBATES.log({event_type:"search_click",merchant_id:d.storeId}),stat(["_trackEvent","Search","ShopNow",d.get("storeName")]),d.activate(),a.stopPropagation(),a.preventDefault(),window.close()}}),this.render()}}),RecentStoreView=Backbone.View.extend({template:Handlebars.templates["store-recent"],events:{click:function(){var a=this.model.toJSON();return stat(["_trackEvent",popup.tabs.tab,"ShopNowRecent",a.domainName,null,popup.tabs.page]),EBATES.log({event_type:"shop_now_recent_store",merchant_id:a.storeId,destination:a.shoppingURL,store_rank:this.model.collection.indexOf(this.model)}),framework.browser.navigate({url:a.shoppingURL.replace("&store_url=%deepLinkUrl%","")+"&tb=yes&domainName="+a.domainName+"&sourceName=toolbar&toolbarFeatureId=TOPSTORES&toolbarId="+background.toolbarId+"&eeid=26142",tabId:framework.browser.NEWTAB}),window.close(),!1}},render:function(){return this.model&&this.setElement($(this.template(this.model.toJSON()))),this.$el}}),RecentStoresView=Backbone.View.extend({el:"#recentStores",displayedStores:[],initialize:function(){this.render()},render:function(){var a=Math.min(2,Math.floor(this.collection.length/2));if(a>0){this.$el.show();for(var b=this.$(".recent-stores").empty(),c=0;c<2*a;c++)this.displayedStores.push(this.collection.at(c)),b.append(new RecentStoreView({model:this.collection.at(c)}).render())}},getDisplayedStores:function(){return this.displayedStores}}),TabsView=Backbone.View.extend({el:"#content",noHeaderScrollWhenActivate:!1,noHeaderScrollWhenStoresTab:!1,freeze:!1,prevTopScroll:0,page:null,tab:null,events:{"click .tabBtn":function(a){$(".tab").show(),this.switchTab($(a.currentTarget))},"scroll .list-scrollbox":"scrollHandle"},initialize:function(){this.$("#btnTAF").text("Get "+EBATES.settings.refsettings.get("referBonusAmount")),this.updateButton("#btnMyDeals",!0)},updateButton:function(a,b){if("string"==typeof a&&(a=$(a)),a.length){this.$(".tabBtn").removeAttr("disabled").filter(a).attr("disabled",!0);var c=a.offset().left+"px",d=a.outerWidth()+"px";if(b){this.$(".marker").css({left:c,width:d})}else this.$(".marker").animate({left:c,width:d},{easing:"easeInOutCubic",queue:!0})}},switchTab:function(a,b){window.scrollTo(0,0),"string"==typeof a&&(a=$(a)),popup.header&&popup.header.show&&popup.header.show();var c=-380*a.index();switch(this.noHeaderScrollWhenStoresTab=0==a.index(),this.updateButton(a,b),a.attr("id")){case"btnMyDeals":EBATES.log({event_type:popup.merchantMode?"merchant_top_deals_page_view":"daily_deals_page_view",came_from_page:this.page}),this.tab=popup.merchantMode?"Store Deals":"My Deals",this.page="/button-popup"+popup.tab.page;break;case"btnTAF":EBATES.log({event_type:"taf_page_view",came_from_page:this.page}),this.tab="Get $5",this.page="/button-popup/taf",this.$(".jspPane").css("top",0),this.$("#tafPanel > div").hide().filter(".main-offer").show();break;case"btnMyOrders":popup.orders&&popup.orders.trigger("tab.shown"),EBATES.log({event_type:"orders_page_view",came_from_page:this.pate}),this.tab="My Orders",this.page="/button-popup/myOrders"}if(b){this.$("#tabs .scrollContainer").css({left:c})}else this.$("#tabs .scrollContainer").animate({left:c},{easing:"easeInOutCubic",queue:!0,complete:function(){popup.tab&&popup.tab.scroll&&popup.tab.scroll.scrollToY(0)}});stat(["_trackPageview",this.page])},scrollHandle:function(a){function b(a,b){if("height"==b.prop){var c=423-a+"px";$("#tabs .scrollContainer").css("height",c),d.css("height",c)}}var c=this;if(!(this.noHeaderScrollWhenActivate||this.noHeaderScrollWhenStoresTab||this.freeze)){var d=$(a.currentTarget);if(!d.hasClass("scroll-lock")){var e=-parseInt(d.find(".jspPane").css("top"));this.prevTopScroll>e&&$("#header").is(":hidden")?($("#header").slideDown({duration:300,easing:"easeInOutCubic",step:b,complete:function(){_.delay(function(){c.freeze=!1},300)}}),this.freeze=!0):this.prevTopScroll<e&&e>=60&&$("#header").is(":visible")&&($("#header").slideUp({duration:300,easing:"easeInOutCubic",step:b,complete:function(){_.delay(function(){c.freeze=!1},300)}}),this.freeze=!0),this.prevTopScroll=e}}},removeTab:function(a,b){var c=this.$(a);$("#"+c.attr("panelId")).remove(),c.remove()}});