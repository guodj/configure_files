/*! 
 * Ebates Button v4.14.4.1 2017-03-15
 * Copyrights 2016 Ebates Inc.
 */
"use strict";window.webext=window.browser||window.chrome;var EBATES=EBATES||{},notification,tooltip;EBATES.log=function(){},EBATES.merchant={activated:!1,loggedIn:webext.extension.getBackgroundPage().EBATES.loggedIn},EBATES.WalkthroughTooltip=EBATES.NotificationTooltip.extend({template:Handlebars.templates.walkthrough,HIDE_TIMEOUT:0,events:{"click a[data-storeName]":function(a){webext.extension.getBackgroundPage().stat(["_trackEvent","Onboarding","Step2Store",a.target.getAttribute("data-storeName")])}},initialize:function(){},render:function(){return EBATES.NotificationTooltip.prototype.render.apply(this,arguments),this.$("#links a").randomize(),this.$el}}),EBATES.WalkthrougNotification=EBATES.Notification.extend({name:"notification-walkthrough",template:Handlebars.templates["notification-walkthrough"],category:"Walkthrough",page:"walkthrough",showInterval:0,events:{"click .ebates-notification-button-activate":function(){webext.extension.getBackgroundPage().stat(["_trackEvent","Onboarding","Step1","Activate"]),notification.hide(),EBATES.merchant.activated=!0,_.delay(function(){webext.extension.getBackgroundPage().stat(["_trackPageview","/onboarding/step2"]),notification=new EBATES.WalkthrougNotification({model:EBATES.merchant}).render(),tooltip.$(".ebates-walktrhough-step1").fadeOut(),tooltip.$(".ebates-walktrhough-step2").fadeIn()},20)},"click .ebates-notification-button-login":function(){webext.extension.getBackgroundPage().login({})}},initialize:function(){}}),EBATES.WalkthrougEdgeNotification=Backbone.View.extend({name:"walkthrough-edge",template:Handlebars.templates["walkthrough-edge"],events:{"click .ebates-notification-button-next":function(){webext.extension.getBackgroundPage().stat(["_trackEvent","Onboarding","Edge1","Next"]),window.notification=new EBATES.WalkthrougNotification({model:EBATES.merchant}),window.notification.render(),window.tooltip=new EBATES.WalkthroughTooltip({model:EBATES.merchant}),window.tooltip.render(),this.remove()}},initialize:function(){},render:function(){return this.setElement($(this.template(this.model)).appendTo(document.body)),this.$el}}),$(document).ready(function(){var a=webext.extension.getBackgroundPage();"Edge"==a.framework.browser.name?(a.stat(["_trackPageview","/onboarding/edge1"]),new EBATES.WalkthrougEdgeNotification({model:EBATES.merchant}).render()):(a.stat(["_trackPageview","/onboarding/step1"]),notification=new EBATES.WalkthrougNotification({model:EBATES.merchant}),notification.render(),tooltip=new EBATES.WalkthroughTooltip({model:EBATES.merchant}),tooltip.render()),a.framework.extension.setItem("walkthrough",1)}),$.fn.randomize=function(a){return(a?this.find(a):this).parent().each(function(){$(this).children(a).sort(function(){return Math.random()-.5}).detach().appendTo(this)}),this};