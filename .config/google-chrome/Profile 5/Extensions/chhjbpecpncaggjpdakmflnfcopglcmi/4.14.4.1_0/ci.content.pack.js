window.AddonsFramework=function(){this.browser=new this.Browser;this.extension=new this.Extension};window.AddonsFramework.prototype.Browser=function(){function g(a,b){if(d[a])for(var c=0;c<d[a].length;c++)d[a][c](b)}function f(a){var b={action:"ci_browser_navigate"},c;for(c in a)b[c]=a[c];return b}var d={};this.attachEvent=function(a,b){d[a]||(d[a]=[]);d[a].push(b)};this.fireEvent=g;this.navigate=function(a){chrome.runtime.sendMessage(f(a))};this.NEWTAB=-1;this.CURRENTTAB=-2;this.NEWWINDOW=-3;this.ALLTABS=-4;var e=navigator.userAgent.match(/.*(opr|yabrowser|mrchrome|chrome|firefox|edge)\/?\s*([\.\d]+)/i);
if(e){switch(e[1].toLowerCase()){case "opr":this.name="Opera";break;case "firefox":case "edge":this.name=e[1];break;default:this.name="Chrome"}this.version=e[2]||"unknown"}else this.name="chromium",this.version="unknown";chrome.runtime.onMessage.addListener(function(a){"event"===a.action&&g(a.name,a.data)})};window.AddonsFramework.prototype.Extension=function(){function g(a,b){for(var c in b)a[c]=b[c]}var f=this,d={},e={name:null,version:null,description:null,url:null,a:null};(function(){chrome.runtime.sendMessage({action:"ci_extension_getSettings"},function(a){g(e,a);f.__defineGetter__("name",function(){return e.name});f.__defineGetter__("version",function(){return e.version});f.__defineGetter__("description",function(){return e.description});f.__defineGetter__("url",function(){return e.url});f.__defineGetter__("author",
function(){return e.author})})})();this.fireEvent=function(a,b,c){c?chrome.runtime.sendMessage({action:"event",name:a,data:b},c):chrome.runtime.sendMessage({action:"event",name:a,data:b});if(d[a])for(var e=0;e<d[a].length;e++)d[a][e].call(f,b,c)};this.attachEvent=function(a,b){d[a]||(d[a]=[]);d[a].push(b)};this.detachEvent=function(a,b){if(d[a])for(var c=0;c<d[a].length;c++)b&&b===d[a][c]&&(delete d[a][c],d[a][c]=null,d[a].splice(c,1))};this.log=function(){console.log.apply(console,arguments)};this.setItem=
function(a,b){if("string"==typeof a)if("undefined"==typeof b)chrome.storage.local.remove(a);else{var c={};c[a]=b;chrome.storage.local.set(c)}else"object"==typeof a&&chrome.storage.local.set(a)};this.getItem=function(a,b){"string"==typeof a||("array"==typeof a||"object"==typeof a)&&0<a.length?chrome.storage.local.get(a,function(c){"string"==typeof a?b(c?c[a]:null):b(c)}):b(null)};chrome.runtime.onMessage.addListener(function(a,b,c){if("event"===a.action&&(b=a.name,d[b]))for(var e=0;e<d[b].length;e++)d[b][e]&&
d[b][e].call(f,{data:a.data.data},c)})};window.framework=new AddonsFramework;
